import './polyfills.server.mjs';
import{a as m}from"./chunk-LPQRKPJJ.mjs";import{a as F}from"./chunk-7RBZFJLQ.mjs";import{a as E}from"./chunk-RVTEVSFG.mjs";import{a as k}from"./chunk-3JTQHYFI.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-WVUI6REW.mjs";import"./chunk-GENOAINO.mjs";import"./chunk-5YC5RUDY.mjs";import{Hb as a,Ib as W,Jb as y,Ma as x,Pb as L,Qa as l,Y as d,aa as v,fb as b,hb as C,ka as h,la as p,lb as g,nb as S,ob as w,pb as s,qb as o,rb as f,ub as T,yb as _,zb as u}from"./chunk-R445CJHI.mjs";import"./chunk-VVCT4QZE.mjs";var I=(r,i)=>i.id;function A(r,i){if(r&1){let n=T();s(0,"div",3)(1,"div",4)(2,"div"),f(3,"img",5),o()(),s(4,"div",6)(5,"div")(6,"h3",7),a(7),o(),s(8,"p",8),a(9),o(),s(10,"button",9),_("click",function(){let e=h(n).$implicit,c=u(2);return p(c.confirmBox(e.id))}),f(11,"i",10),s(12,"h3",11),a(13,"remove"),o()()(),s(14,"div",12)(15,"button",13),_("click",function(){let e=h(n).$implicit,c=u(2);return p(c.addToCart(e._id))}),a(16,"Add To Cart "),o()()()()}if(r&2){let n=i.$implicit;l(3),C("src",n.imageCover,x)("alt",n.title),l(4),W(n.title),l(2),y("Price: ",n.price,"")}}function B(r,i){if(r&1&&(s(0,"section",0)(1,"div",1)(2,"h1",2),a(3,"My wish List"),o()(),S(4,A,17,4,"div",3,I),o()),r&2){let n=u();l(4),w(n.productsList)}}var P=(()=>{let i=class i{constructor(){this._WishlistService=d(F),this._CartService=d(k),this._ToastrService=d(E),this.productsList=null}ngOnDestroy(){this.getAllWishList?.unsubscribe(),this.removeAllWishList?.unsubscribe(),this.addToCartWishList?.unsubscribe()}ngOnInit(){this.getAllWishList=this._WishlistService.getWishlist().subscribe({next:t=>{this.productsList=t.data},error:t=>{console.log(t)}})}removeItem(t){this.removeAllWishList=this._WishlistService.removeProduct(t).subscribe({next:e=>{this._ToastrService.success(e.message,"Fresh Card"),localStorage.setItem("heart",e.data),this._WishlistService.getWishlist().subscribe({next:c=>{this.productsList=c.data}})},error:e=>{console.log(e)}})}addToCart(t){this.addToCartWishList=this._CartService.addProductsToCard(t).subscribe({next:e=>{this._ToastrService.success(e.message,"Fresh Card"),this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}confirmBox(t){m.fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(e=>{e.value?(m.fire("Deleted!","Your imaginary file has been deleted.","success"),this.removeItem(t)):e.dismiss===m.DismissReason.cancel&&m.fire("Cancelled","Your imaginary file is safe :)","error")})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v({type:i,selectors:[["app-wishlist"]],standalone:!0,features:[L],decls:1,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h2"],[1,"row","mb-1","border-bottom","m-0"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main"],[1,"text-danger","border-0","cr","btn","p-0","d-flex","align-items-center","justify-content-center",3,"click"],[1,"fa-solid","fa-trash"],[1,"h6","mt-1","text-danger","ms-2"],[1,"d-flex","align-items-center","gap-2"],[1,"cr","border-1","rounded-2","btn-green","p-2",3,"click"]],template:function(e,c){e&1&&b(0,B,6,0,"section",0),e&2&&g(0,c.productsList?0:-1)}});let r=i;return r})();export{P as WishlistComponent};
