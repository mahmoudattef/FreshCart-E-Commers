import './polyfills.server.mjs';
import{a as K,b as Q,c as X}from"./chunk-4AVCGYTM.mjs";import{c as G,d as Y,e as q}from"./chunk-P4CZYSZP.mjs";import{a as $}from"./chunk-YFEOQ475.mjs";import{a as J}from"./chunk-7RBZFJLQ.mjs";import{a as H}from"./chunk-RVTEVSFG.mjs";import{a as N}from"./chunk-3JTQHYFI.mjs";import"./chunk-GTSSCL6B.mjs";import{a as D,c as j,g as O,l as R}from"./chunk-WJEQEY6J.mjs";import"./chunk-WVUI6REW.mjs";import"./chunk-WI2M6OGW.mjs";import"./chunk-GENOAINO.mjs";import{o as V}from"./chunk-5YC5RUDY.mjs";import{Hb as d,Ib as _,Jb as E,Lb as k,Ma as L,Mb as M,Nb as W,Pb as B,Qa as c,Qb as U,Tb as A,Wb as g,Xb as z,Y as p,Yb as C,aa as I,fb as x,hb as S,ka as f,la as P,lb as v,mb as F,nb as b,ob as w,pb as o,qb as s,rb as u,ub as T,yb as h,zb as m}from"./chunk-R445CJHI.mjs";import"./chunk-VVCT4QZE.mjs";var Z=(i,r)=>r.id,ee=(i,r,n)=>({id:"productPaginate",itemsPerPage:i,currentPage:r,totalItems:n}),te=()=>[1,2,3,4,5];function ie(i,r){i&1&&u(0,"i",8)}function re(i,r){if(i&1){let n=T();o(0,"i",16),h("click",function(){f(n);let e=m().$implicit,a=m();return P(a.addWishList(e.id))}),s()}}function ne(i,r){i&1&&(o(0,"span"),u(1,"i",17),s())}function ae(i,r){i&1&&u(0,"i",13)}function oe(i,r){if(i&1){let n=T();o(0,"div",4)(1,"div",7)(2,"div")(3,"span"),x(4,ie,1,0,"i",8)(5,re,1,0),s(),u(6,"img",9),o(7,"h3",10),d(8),g(9,"uppercase"),s(),o(10,"h4",11),d(11),g(12,"termtext"),s(),o(13,"div",12)(14,"p"),d(15),s(),o(16,"div"),b(17,ne,2,0,"span",null,F),x(19,ae,1,0,"i",13),o(20,"span",14),d(21),s()()()(),o(22,"button",15),h("click",function(){let e=f(n).$implicit,a=m();return P(a.addCart(e.id))}),d(23,"add to cart"),s()()()}if(i&2){let n=r.$implicit,t=m();c(4),v(4,t.wishId.includes(n.id)?4:5),c(2),S("src",n.imageCover,L)("alt",n.title),c(2),_(z(9,8,n.category.name)),c(3),_(C(12,10,n.title,2)),c(4),E("",n.price,"EGP"),c(2),w(U(13,te).slice(0,n.ratingsAverage)),c(2),v(19,n.ratingsAverage%1!==0?19:-1),c(2),_(n.ratingsAverage)}}var we=(()=>{let r=class r{constructor(){this._ProductsService=p($),this._CartService=p(N),this._WishlistService=p(J),this._ToastrService=p(H),this.productsList=[],this.text="",this.wishId=null,this.pageSize=0,this.currentPage=1,this.total=0}ngOnInit(){this.getAllProductUnsub=this._ProductsService.getAllProducts().subscribe({next:t=>{this.pageSize=t.metadata.limit,this.currentPage=t.metadata.currentPage,this.total=t.results,this.productsList=t.data,this.wishId=t.data,localStorage.getItem("heart")!==null&&(this.wishId=localStorage.getItem("heart"))},error:t=>{console.error(t)}})}ngOnDestroy(){this.getAllProductUnsub?.unsubscribe(),this.addCartUnsub?.unsubscribe(),this.addWishListUnsub?.unsubscribe(),this.pageChangedUnSub?.unsubscribe()}addCart(t){this.addCartUnsub=this._CartService.addProductsToCard(t).subscribe({next:e=>{this._ToastrService.success(e.message,"Fresh Card"),this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}addWishList(t){this.addWishListUnsub=this._WishlistService.addProductToWhishList(t).subscribe({next:e=>{this._ToastrService.success(e.message,"Fresh Card"),this.wishId=e.data,localStorage.setItem("heart",this.wishId.toString())},error:e=>{console.log(e)}})}pageChanged(t){this.pageChangedUnSub=this._ProductsService.getAllProducts(t).subscribe({next:e=>{this.productsList=e.data,this.pageSize=e.metadata.limit,this.currentPage=e.metadata.currentPage,this.total=e.results},error:e=>{console.log(e)}})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=I({type:r,selectors:[["app-product"]],standalone:!0,features:[B],decls:11,vars:15,consts:[[1,"mt-1","m-4"],[1,"h3","text-main"],["type","search","placeholder","Search By Name",1,"form-control","w-50","mx-auto",3,"ngModelChange","ngModel"],[1,"row","g-3","mt-4"],[1,"col-md-2"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive"],[1,"product","p-2"],[1,"fa-regular","fa-heart","fa-xl","cr","text-danger"],[1,"w-100","my-1",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-regular","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100","mt-1",3,"click"],[1,"fa-regular","fa-heart","fa-xl","cr","text-main",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(e,a){e&1&&(o(0,"section",0)(1,"h2",1),d(2,"Pupoler Products:"),s(),o(3,"input",2),W("ngModelChange",function(l){return M(a.text,l)||(a.text=l),l}),s(),o(4,"div",3),b(5,oe,24,14,"div",4,Z),g(7,"paginate"),g(8,"search"),s(),o(9,"div",5)(10,"pagination-controls",6),h("pageChange",function(l){return a.pageChanged(l)})("pageBoundsCorrection",function(l){return a.pageChanged(l)}),s()()()),e&2&&(c(3),k("ngModel",a.text),c(2),w(C(8,8,C(7,5,a.productsList,A(11,ee,a.pageSize,a.currentPage,a.total)),a.text)),c(5),S("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0))},dependencies:[R,D,j,O,G,V,Y,q,X,K,Q]});let i=r;return i})();export{we as ProductComponent};
