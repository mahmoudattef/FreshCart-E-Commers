import './polyfills.server.mjs';
import{a as P}from"./chunk-2IBMUG4Q.mjs";import"./chunk-QZLY374Y.mjs";import{a as V,b as l,c as F,d as G,e as C,f as c,h as N,i as T,j as A,m as D}from"./chunk-WJEQEY6J.mjs";import"./chunk-WVUI6REW.mjs";import{d as E}from"./chunk-WI2M6OGW.mjs";import"./chunk-GENOAINO.mjs";import"./chunk-5YC5RUDY.mjs";import{Hb as a,Pb as y,Qa as u,Y as S,aa as x,fb as b,hb as m,ka as f,la as v,lb as h,pb as n,qb as r,rb as p,ub as w,yb as _,zb as d}from"./chunk-R445CJHI.mjs";import"./chunk-VVCT4QZE.mjs";function R(o,s){if(o&1){let e=w();n(0,"form",2),_("ngSubmit",function(){f(e);let i=d();return v(i.verifyEmailSubmit())}),n(1,"div",3)(2,"label",4),a(3,"email"),r(),p(4,"input",5),r(),n(5,"button",6),a(6,"verify Email"),r()()}if(o&2){let e=d();m("formGroup",e.verifyEmail),u(5),m("disabled",e.verifyEmail.invalid)}}function q(o,s){if(o&1){let e=w();n(0,"form",2),_("ngSubmit",function(){f(e);let i=d();return v(i.verifyCodeSubmit())}),n(1,"div",3)(2,"label",7),a(3,"resetCode"),r(),p(4,"input",8),r(),n(5,"button",6),a(6,"verify Email"),r()()}if(o&2){let e=d();m("formGroup",e.verifyCode),u(5),m("disabled",e.verifyCode.invalid)}}function M(o,s){if(o&1){let e=w();n(0,"form",2),_("ngSubmit",function(){f(e);let i=d();return v(i.resetPasswordSubmit())}),n(1,"div",3)(2,"label",4),a(3,"email"),r(),p(4,"input",5),r(),n(5,"div",3)(6,"label",9),a(7,"newPassword"),r(),p(8,"input",10),r(),n(9,"button",6),a(10,"verify Email"),r()()}if(o&2){let e=d();m("formGroup",e.resetPassword),u(9),m("disabled",e.verifyEmail.invalid)}}var H=(()=>{let s=class s{constructor(){this._AuthService=S(P),this._Router=S(E),this.step=1,this.verifyEmail=new C({email:new c(null,[l.required,l.email])}),this.verifyCode=new C({resetCode:new c(null,[l.required,l.pattern(/^[0-9]{6}$/)])}),this.resetPassword=new C({email:new c(null,[l.required,l.email]),newPassword:new c(null,[l.required,l.pattern(/^\w{6,}$/)])})}verifyEmailSubmit(){let t=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(t),this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:i=>{i.statusMsg==="success"&&(this.step=2)},error:i=>{console.log(i)}})}verifyCodeSubmit(){this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:t=>{t.status==="Success"&&(this.step=3)},error:t=>{console.log(t)}})}resetPasswordSubmit(){this._AuthService.setResetPass(this.resetPassword.value).subscribe({next:t=>{localStorage.setItem("userToken",t.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:t=>{console.log(t)}})}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=x({type:s,selectors:[["app-forgot-password"]],standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"btn-main",3,"disabled"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control"]],template:function(i,g){i&1&&(n(0,"section")(1,"h1",0),a(2,"Forgot Password"),r(),b(3,R,7,2,"form",1)(4,q,7,2)(5,M,11,2),r()),i&2&&(u(3),h(3,g.step==1?3:g.step==2?4:g.step==3?5:-1))},dependencies:[D,N,V,F,G,T,A]});let o=s;return o})();export{H as ForgotPasswordComponent};
