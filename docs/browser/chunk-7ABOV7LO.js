import{a as b}from"./chunk-R2NVHWVK.js";import"./chunk-G5KA7DMQ.js";import{a as L,b as g,c as T,d as y,h as N,i as A,j as k,k as q,l as D,m as R}from"./chunk-RIUDB373.js";import{c as x,d as w}from"./chunk-2HWPXV2S.js";import"./chunk-ORF7TDXP.js";import"./chunk-Z3ODQKXR.js";import{$ as C,Eb as l,Fb as E,Mb as F,Na as m,Y as f,cb as u,eb as S,ib as s,mb as i,nb as t,ob as _,vb as v,wb as h}from"./chunk-PRGVUTWH.js";import"./chunk-CWTPBX7D.js";function G(e,n){e&1&&(i(0,"p"),l(1,"Email is required"),t())}function M(e,n){e&1&&(i(0,"p"),l(1,"Email valid email"),t())}function P(e,n){if(e&1&&(i(0,"div",6),u(1,G,2,0,"p")(2,M,2,0),t()),e&2){let r,o=h();m(),s(1,(r=o.loginForm.get("email"))!=null&&r.getError("required")?1:(r=o.loginForm.get("email"))!=null&&r.getError("email")?2:-1)}}function B(e,n){e&1&&(i(0,"p"),l(1,"Password is required"),t())}function V(e,n){e&1&&(i(0,"p"),l(1,"Password must be at least 8 characters long"),t())}function j(e,n){if(e&1&&(i(0,"div",6),u(1,B,2,0,"p")(2,V,2,0),t()),e&2){let r,o=h();m(),s(1,(r=o.loginForm.get("password"))!=null&&r.getError("required")?1:(r=o.loginForm.get("password"))!=null&&r.getError("pattern")?2:-1)}}function I(e,n){e&1&&(i(0,"span"),_(1,"i",13),t())}function O(e,n){if(e&1&&(i(0,"p",12),l(1),t()),e&2){let r=h();m(),E(r.msgError)}}function U(e,n){e&1&&(i(0,"p"),l(1,"success"),t())}var X=(()=>{let n=class n{constructor(){this._AuthService=f(b),this._FormBuilder=f(q),this._Router=f(x),this.msSuccess=!1,this.isLoading=!1,this.msgError="",this.loginForm=this._FormBuilder.group({email:[null,[g.required,g.email]],password:[null,[g.required,g.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,console.log(this.loginForm.value),this.loginSub=this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:o=>{o.message=="success"&&(this.msSuccess=!0,setTimeout(()=>{localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1e3))},error:o=>{this.msgError=o.error.message,console.log(o),this.isLoading=!1}})):this.loginForm.markAllAsTouched()}ngOnDestroy(){this.loginSub?.unsubscribe()}};n.\u0275fac=function(c){return new(c||n)},n.\u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!0,features:[F],decls:22,vars:6,consts:[[1,"bg-main-light","shadow","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","id","email","name","email","formControlName","email",1,"form-control"],[1,"alert","alert-danger","w-50"],["for","password"],["type","password","name","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","align-items-center","justify-content-end","gap-2"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main"],[1,"alert","alert-danger","w-50","m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(c,a){if(c&1&&(i(0,"section",0)(1,"h1",1),l(2,"login"),t(),i(3,"form",2),v("ngSubmit",function(){return a.loginSubmit()}),i(4,"div",3)(5,"label",4),l(6,"Email:"),t(),_(7,"input",5),u(8,P,3,1,"div",6),t(),i(9,"div",3)(10,"label",7),l(11,"Password:"),t(),_(12,"input",8),u(13,j,3,1,"div",6),t(),i(14,"div",9)(15,"a",10),l(16,"Forgot Password"),t(),i(17,"button",11),l(18,"login "),u(19,I,2,0,"span"),t()(),u(20,O,2,1,"p",12)(21,U,2,0,"p"),t()()),c&2){let d,p;m(3),S("formGroup",a.loginForm),m(5),s(8,(d=a.loginForm.get("email"))!=null&&d.errors&&((d=a.loginForm.get("email"))!=null&&d.touched||(d=a.loginForm.get("email"))!=null&&d.dirty)?8:-1),m(5),s(13,(p=a.loginForm.get("password"))!=null&&p.errors&&((p=a.loginForm.get("password"))!=null&&p.touched||(p=a.loginForm.get("password"))!=null&&p.dirty)?13:-1),m(6),s(19,a.isLoading?19:-1),m(),s(20,a.msgError?20:-1),m(),s(21,a.msSuccess?21:-1)}},dependencies:[D,N,L,T,y,R,A,k,w]});let e=n;return e})();export{X as LoginComponent};
