import{l as P}from"./chunk-TAHB6GLZ.js";import{a as Y}from"./chunk-4NH4H2V5.js";import{d as V}from"./chunk-2HWPXV2S.js";import"./chunk-ORF7TDXP.js";import{o as F}from"./chunk-Z3ODQKXR.js";import{$ as g,Eb as c,Fb as b,Gb as v,Ja as S,Mb as k,Na as l,Ob as D,Tb as E,Vb as B,Y as C,cb as w,eb as x,ib as y,ja as p,ka as _,kb as I,lb as T,mb as n,nb as o,ob as u,rb as h,vb as f,wb as d}from"./chunk-PRGVUTWH.js";import{a as $}from"./chunk-3RJIKSNN.js";import{e as U}from"./chunk-CWTPBX7D.js";var m=U($());var j=(r,a)=>a.product.id,A=r=>["/orders",r];function N(r,a){if(r&1){let i=h();n(0,"div",5)(1,"div",7)(2,"div"),u(3,"img",8),o()(),n(4,"div",9)(5,"div")(6,"h3",10),c(7),o(),n(8,"p",4),c(9),o(),n(10,"button",11),f("click",function(){let e=p(i).$implicit,s=d(2);return _(s.confirmBox(e.product.id))}),u(11,"i",12),n(12,"h3",13),c(13,"remove"),o()()(),n(14,"div",14)(15,"span",15),f("click",function(){let e=p(i).$implicit,s=d(2);return _(s.updateCount(e.product.id,e.count+1))}),u(16,"i",16),o(),n(17,"span"),c(18),o(),n(19,"span",15),f("click",function(){let e=p(i).$implicit,s=d(2);return _(s.updateCount(e.product.id,e.count-1))}),u(20,"i",17),o()()()()}if(r&2){let i=a.$implicit;l(3),x("src",i.product.imageCover,S)("alt",i.product.title),l(4),b(i.product.title),l(2),v("Price: ",i.price,""),l(9),b(i.count)}}function O(r,a){if(r&1){let i=h();n(0,"div",1)(1,"h1",2),c(2,"Show Cart"),o(),n(3,"button",3),f("click",function(){p(i);let e=d();return _(e.clearBox())}),c(4," Clear Cart"),o()(),n(5,"p",4),c(6),E(7,"currency"),o(),I(8,N,21,5,"div",5,j),n(10,"button",6),c(11," Orders"),o()}if(r&2){let i=d();l(6),v("Total Cart Price : ",B(7,2,i.cartDetails.totalCartPrice,"GBP"),""),l(2),T(i.cartDetails.products),l(2),x("routerLink",D(5,A,i.cartDetails._id))}}function R(r,a){r&1&&(u(0,"img",18),n(1,"h1",19),c(2," Cart Is Empty "),o())}var J=(()=>{let a=class a{constructor(){this._CartService=C(Y),this._ToastrService=C(P),this.cartDetails={}}ngOnInit(){this.getAllCart=this._CartService.getProductsCard().subscribe({next:t=>{this.cartDetails=t.data,this.numItem=t.data.products.length},error:t=>{console.log(t)}})}ngOnDestroy(){this.getAllCart?.unsubscribe(),this.removeItemUnsub?.unsubscribe(),this.updateCountUnsub?.unsubscribe(),this.clearItemUnsub?.unsubscribe()}removeItem(t){this.removeItemUnsub=this._CartService.deleteSpecificCardITem(t).subscribe({next:e=>{this.cartDetails=e.data,this._CartService.cartNumber.set(e.numOfCartItems),this._ToastrService.success(e.status,"Fresh Card  : Remove Item")},error:e=>{console.log(e)}})}updateCount(t,e){e>0&&(this.updateCountUnsub=this._CartService.updateProductQuantity(t,e).subscribe({next:s=>{this.cartDetails=s.data,this._ToastrService.success(s.status,"Fresh Card is update")},error:s=>{console.log(s)}}))}clearItem(){this.clearItemUnsub=this._CartService.clearCart().subscribe({next:t=>{t.message=="success"&&(this.cartDetails={},this._ToastrService.success(t.status,"Fresh Card is clear"),this._CartService.cartNumber.set(0),this.numItem=0)},error:t=>{console.log(t)}})}confirmBox(t){m.default.fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(e=>{e.value?(m.default.fire("Deleted!","Your imaginary file has been deleted.","success"),this.removeItem(t)):e.dismiss===m.default.DismissReason.cancel&&m.default.fire("Cancelled","Your imaginary file is safe :)","error")})}clearBox(){m.default.fire({title:"Are you sure want to remove?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?(m.default.fire("Deleted!","Your imaginary file has been deleted.","success"),this.clearItem()):t.dismiss===m.default.DismissReason.cancel&&m.default.fire("Cancelled","Your imaginary file is safe :)","error")})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=g({type:a,selectors:[["app-cart"]],standalone:!0,features:[k],decls:3,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","mb-1","border-bottom","m-0"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-danger","border-0","cr","btn","p-0","d-flex","align-items-center","justify-content-center",3,"click"],[1,"fa-solid","fa-trash"],[1,"h6","mt-1","text-danger","ms-2"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"],["src","./assets/images/empty.png","alt","",1,"w-25","m-auto","d-block"],[1,"text-center","text-main"]],template:function(e,s){e&1&&(n(0,"section",0),w(1,O,12,7)(2,R,3,0),o()),e&2&&(l(),y(1,s.numItem!==0?1:2))},dependencies:[F,V]});let r=a;return r})();export{J as CartComponent};
